<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bookify â€” Ù…ØªØ¬Ø± Ø§Ù„ÙƒØªØ¨ (Final Project)</title>

 
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
   
    :root{
      --bg: #f6f8fb;
      --card: #ffffff;
      --accent: #0d6efd; 
      --muted: #556070;
      --radius: 12px;
      --shadow: 0 10px 30px rgba(16,24,40,0.06);
      --glass-shadow: 0 12px 30px rgba(13,110,253,0.08);
      --max-w: 1100px;
    }

    
     {box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Cairo,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#fff);color:#0b1220}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    
    header{
      position:sticky;top:0;background:var(--card);backdrop-filter: blur(6px);
      box-shadow: var(--shadow);z-index:40;border-bottom:1px solid rgba(11,18,32,0.04)
    }
    .container{max-width:var(--max-w);margin:0 auto;padding:12px}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand h1{font-family: 'Playfair Display', serif;margin:0;font-size:20px}
    nav a{margin-right:8px;padding:8px;border-radius:8px;transition:transform .18s ease, background .12s}
    nav a:hover{transform:translateY(-3px);background:linear-gradient(90deg,rgba(13,110,253,0.06),rgba(13,110,253,0.03))} /* hover 1 */

    /* Search */
    form.search{display:flex;gap:8px;flex:1;max-width:520px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(11,18,32,0.06);outline:none;box-shadow: inset 0 1px 0 rgba(255,255,255,0.6)}
    .search button{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;transition:transform .15s, box-shadow .15s}
    .search button:hover{transform:scale(1.03);box-shadow:var(--glass-shadow)} /* hover 2 */

    /* Hero */
    .hero{padding:22px 0;display:flex;flex-direction:column;gap:8px;align-items:flex-start}
    .hero .lead{font-size:16px;color:var(--muted)}

    main{padding:14px 0}
    .layout{display:grid;grid-template-columns:1fr;gap:18px}

    /* Features (Grid #1) */
    .features{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .feature{background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow);display:flex;align-items:center;gap:10px;transition:transform .22s}
    .feature:hover{transform:translateY(-6px) scale(1.01)} /* hover 3 */

    /* Book grid (Grid #2) */
    .book-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
    .card{background:var(--card);border-radius:12px;padding:12px;display:flex;gap:12px;align-items:flex-start;box-shadow:var(--shadow);transition:transform .25s, box-shadow .25s}
    .card:hover{transform:translateY(-8px) rotate(-0.6deg);box-shadow:0 18px 44px rgba(13,110,253,0.12)} /* hover 4 + transform */
    .thumb{width:92px;flex-shrink:0;border-radius:8px;overflow:hidden;background:linear-gradient(180deg,#eef4ff,#fff)}
    .thumb img{width:100%;height:128px;object-fit:cover;display:block;transform-origin:center;transition:transform .35s}
    .card:hover .thumb img{transform:scale(1.07) rotate(-1deg)} /* transform 1 */

    /* meta (Flexbox #1) */
    .meta{display:flex;flex-direction:column;gap:6px;flex:1}
    .meta h3{margin:0;font-size:16px}
    .meta p{margin:0;color:var(--muted);font-size:13px}
    .actions{display:flex;gap:8px;margin-top:10px}
    .btn{padding:8px 10px;border-radius:10px;border:none;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(0,0,0,0.06)}
    .btn.primary{background:var(--accent);color:#fff}
    .btn:hover{transform:translateY(-3px)} /* hover 5 */

    /* detail aside (Flexbox #2 + sticky) */
    .detail{background:linear-gradient(180deg,var(--card),#fff);padding:12px;border-radius:12px;box-shadow:var(--glass-shadow);position:relative}
    .detail.sticky{position:sticky;top:84px}

    /* modal popup (bonus) */
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.5);padding:20px;z-index:80}
    .modal{background:var(--card);padding:18px;border-radius:14px;max-width:640px;width:100%;box-shadow:0 26px 68px rgba(2,6,23,0.16)}
    .close{position:absolute;right:12px;top:12px;background:transparent;border:none;font-size:18px;cursor:pointer}

    /* Footer (Grid #3) */
    footer{padding:22px 0}
    .footer-grid{display:grid;grid-template-columns:1fr;gap:12px}

    /* loader bar */
    .loader{height:6px;background:linear-gradient(90deg,var(--accent),transparent);border-radius:6px;animation:load 1.3s linear infinite}

    /* Animations */
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.03)}100%{transform:scale(1)}}
    @keyframes load{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

    .animate-float{animation:float 3s ease-in-out infinite}
    .pulse{animation:pulse 2.2s ease-in-out infinite}

    /* reveal on scroll (used by JS IntersectionObserver) */
    .reveal{opacity:0;transform:translateY(18px);transition:opacity .6s ease, transform .6s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}

    /* responsive points (mobile-first) */
    @media(min-width:640px){
      .layout{grid-template-columns:2fr 1fr}
      .book-grid{grid-template-columns:repeat(2,1fr)}
      .features{grid-template-columns:repeat(3,1fr)}
      .footer-grid{grid-template-columns:repeat(3,1fr)}
    }
    @media(min-width:900px){
      .book-grid{grid-template-columns:repeat(3,1fr)}
      .layout{grid-template-columns:3fr 1fr}
    }

    /* theme toggle (dark) */
    .theme-dark{--bg:#0b1220;--card:#0f1724;--accent:#7dd3fc;--muted:#8b98a6;color:#e6eef8}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <svg width="40" height="40" viewBox="0 0 24 24" aria-hidden="true"><rect width="24" height="24" rx="6" fill="currentColor" opacity="0.08"/></svg>
        <h1>Bookify</h1>
        <span class="muted">â€” Ù…ØªØ¬Ø± Ø§Ù„ÙƒØªØ¨</span>
      </div>

      <form class="search" id="searchForm">
        <input id="q" name="q" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø£Ùˆ Ù…Ø¤Ù„Ù..." aria-label="search"/>
        <button type="submit" aria-label="search-btn">Ø¨Ø­Ø«</button>
      </form>

      <nav>
        <a href="#books">Ø§Ù„ÙƒØªØ¨</a>
        <a href="#features">Ù…Ù…ÙŠØ²Ø§Øª</a>
        <a href="#contact">ØªÙˆØ§ØµÙ„</a>
      </nav>
    </div>
  </header>

  <main class="container" id="mainContent">
    <section class="hero">
      <div class="lead">Ù…Ø±Ø­Ø¨Ø§ â€” Ù‡Ø°Ø§ Ù…Ø´Ø±ÙˆØ¹ Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù…Ø§Ø¯Ø© Frontend. Ø§Ø¨Ø­Ø«ØŒ Ø§Ø³ØªØ¹Ø±Ø¶ØŒ ÙˆØ§Ø·Ù„Ø¨ ÙƒØªØ¨Ø§Ù‹ Ù…Ù† OpenLibrary.</div>
    </section>

    <div class="layout">
      <section>
        <h2 id="books">Ø£Ø­Ø¯Ø« Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>

        <div id="features" class="features reveal">
          <div class="feature">
            <div style="font-size:22px">ğŸ“š</div>
            <div>
              <strong>Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø±</strong>
              <div class="muted">Ø§Ø³ØªØ¹Ù„Ù… Ø¹Ø¨Ø± OpenLibrary API</div>
            </div>
          </div>
          <div class="feature">
            <div style="font-size:22px">âš¡</div>
            <div>
              <strong>Ø£Ø¯Ø§Ø¡ Ø³Ù„Ø³</strong>
              <div class="muted">ØªØµØ§Ù…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨Ø© ÙˆÙˆØ§Ø¬Ù‡Ø© Ù†Ø¸ÙŠÙØ©</div>
            </div>
          </div>
          <div class="feature">
            <div style="font-size:22px">ğŸ–‹ï¸</div>
            <div>
              <strong>Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ</strong>
              <div class="muted">Ø§Ø­ÙØ¸ ÙƒØªØ¨Ùƒ ÙÙŠ localStorage</div>
            </div>
          </div>
        </div>

        <div id="message" class="muted" style="margin:10px 0">Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø±Ø¶ â€” Ù…Ø«Ø§Ù„: "harry potter"</div>
        <div id="results" class="book-grid" aria-live="polite"></div>

        <template id="cardTemplate">
          <article class="card reveal" data-key="">
            <div class="thumb"><img src="" alt="cover"></div>
            <div class="meta">
              <h3 class="title">Title</h3>
              <p class="author muted">Author</p>
              <p class="year muted">Year</p>
              <div class="actions">
                <button class="btn primary" data-action="view">Ø¹Ø±Ø¶</button>
                <button class="btn secondary" data-action="save">Ø­ÙØ¸</button>
              </div>
            </div>
          </article>
        </template>
      </section>

      <aside>
        <div class="detail sticky" id="detailPanel">
          <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨</h3>
          <div id="detailContent" class="muted">Ø§Ø®ØªØ± ÙƒØªØ§Ø¨Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù‡Ù†Ø§.</div>
          <hr />
          <label for="filter">ÙÙ„ØªØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ø¹Ù†ÙˆØ§Ù†):</label>
          <input id="filter" placeholder="Ø§Ø¯Ø®Ù„ Ù†Øµ Ù„Ù„ÙÙ„ØªØ±Ø©" />
          <div style="margin-top:12px;display:flex;gap:8px;">
            <button id="openModal" class="btn primary">Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±</button>
            <button id="toggleTheme" class="btn secondary">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…</button>
          </div>
        </div>
      </aside>
    </div>

    <footer class="footer-grid" id="contact">
      <div>
        <strong>Bookify</strong>
        <p class="muted">Ù…Ø´Ø±ÙˆØ¹ Ù†Ù‡Ø§Ø¦ÙŠ â€” Ù…ØªØ¬Ø± ÙƒØªØ¨ ØªÙØ§Ø¹Ù„ÙŠ</p>
      </div>
      <div>
        <strong>ØªÙˆØ§ØµÙ„</strong>
        <p class="muted">email@example.com</p>
      </div>
      <div>
        <strong>OpenLibrary</strong>
        <p class="muted">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† openlibrary.org</p>
      </div>
    </footer>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <button class="close" id="closeModal">âœ•</button>
      <h2>Ø¹Ù† Bookify</h2>
      <p class="muted">Ù†Ù…ÙˆØ°Ø¬ Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…ØªØ¬Ø± Ø§Ù„ÙƒØªØ¨ â€” ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨Ø­Ø« Ø¹Ø¨Ø± APIØŒ ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ØŒ ØªØ­Ø±ÙŠÙƒ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±ØŒ ÙˆØªÙØ§Ø¹Ù„Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©.</p>
    </div>
  </div>

  <script>
    /* =====================
       JavaScript (vanilla)
       - Fetch OpenLibrary
       - try...catch for errors
       - DOM manipulation + event delegation
       - Event listeners: submit, input, click, keydown
       - IntersectionObserver for on-scroll animations (>=3 uses)
       - localStorage save
       =====================*/

    const qInput = document.getElementById('q');
    const results = document.getElementById('results');
    const template = document.getElementById('cardTemplate');
    const message = document.getElementById('message');
    const detailContent = document.getElementById('detailContent');
    const filterInput = document.getElementById('filter');
    const modal = document.getElementById('modal');
    const openModalBtn = document.getElementById('openModal');
    const closeModalBtn = document.getElementById('closeModal');
    const toggleTheme = document.getElementById('toggleTheme');
    let lastResults = [];

    // Helper sanitize
    function txt(s){ return s ? String(s) : '' }

    // Fetch from OpenLibrary (API request >=1) with error handling
    async function searchBooks(query){
      const url = `https://openlibrary.org/search.json?q=${encodeURIComponent(query)}&limit=18`;
      try{
        message.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
        results.innerHTML = '<div class="loader" style="height:8px;margin:8px 0;border-radius:8px"></div>';
        const res = await fetch(url);
        if(!res.ok) throw new Error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        const data = await res.json();
        lastResults = data.docs || [];
        renderResults(lastResults);
        message.textContent = `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${data.numFound || 0} Ù†ØªÙŠØ¬Ø© â€” Ø¹Ø±Ø¶ Ø£ÙˆÙ„ ${lastResults.length}.`;
      }catch(err){
        console.error(err);
        message.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€” ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.';
        results.innerHTML = '';
      }
    }

    // Render (DOM manipulation)
    function renderResults(items){
      results.innerHTML = '';
      if(!items.length){ results.innerHTML = '<p class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.</p>'; return }
      const frag = document.createDocumentFragment();
      items.forEach((it, idx) => {
        const node = template.content.cloneNode(true);
        const art = node.querySelector('.card');
        art.dataset.key = idx;
        const img = art.querySelector('img');
        const title = art.querySelector('.title');
        const author = art.querySelector('.author');
        const year = art.querySelector('.year');
        title.textContent = txt(it.title);
        author.textContent = (it.author_name && it.author_name[0]) || 'Ù…Ø¬Ù‡ÙˆÙ„';
        year.textContent = it.first_publish_year || 'â€”';
        const coverId = it.cover_i;
        img.src = coverId ? `https://covers.openlibrary.org/b/id/${coverId}-M.jpg` : 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="240"><rect width="100%" height="100%" fill="%23eef3ff"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%238899a8" font-size="14">No Cover</text></svg>';
        frag.appendChild(node);
      });
      results.appendChild(frag);
      // After adding elements, observe reveals
      observeReveals();
    }

    // Submit (search) listener
    document.getElementById('searchForm').addEventListener('submit', e=>{
      e.preventDefault();
      const q = qInput.value.trim();
      if(!q) return message.textContent = 'Ø£Ø¯Ø®Ù„ Ù†Øµ Ù„Ù„Ø¨Ø­Ø«.';
      searchBooks(q);
    });

    // Filter (input) listener -> dynamic updates
    filterInput.addEventListener('input', e=>{
      const v = e.target.value.toLowerCase();
      const filtered = lastResults.filter(it => txt(it.title).toLowerCase().includes(v));
      renderResults(filtered);
    });

    // Event delegation on results for buttons (click)
    results.addEventListener('click', e=>{
      const action = e.target.dataset.action;
      const card = e.target.closest('.card');
      if(!card) return;
      const idx = parseInt(card.dataset.key, 10);
      const data = lastResults[idx];
      if(action === 'view'){
        showDetail(data);
      } else if(action === 'save'){
        try{
          const saved = JSON.parse(localStorage.getItem('savedBooks') || '[]');
          saved.push(data);
          localStorage.setItem('savedBooks', JSON.stringify(saved));
          alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø­Ù„ÙŠØ§Ù‹');
        }catch(err){ console.error(err); alert('ØªØ¹Ø°Ø± Ø§Ù„Ø­ÙØ¸'); }
      }
    });

    // Keyboard listener (keydown) â€” 3rd event type
    document.addEventListener('keydown', e=>{
      if(e.key === 'Escape') closeModal();
    });

    // Show details in aside
    function showDetail(book){
      if(!book) return;
      detailContent.innerHTML = `
        <strong>${txt(book.title)}</strong>
        <p class="muted">${(book.author_name && book.author_name.join(', ')) || 'Ù…Ø¬Ù‡ÙˆÙ„'}</p>
        <p class="muted">First published: ${book.first_publish_year || 'â€”'}</p>
        <p class="muted">ISBNs: ${ (book.isbn && book.isbn.slice(0,6).join(', ')) || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</p>
        <div style="margin-top:8px">
          <button class="btn primary" onclick="(function(){alert('Ù†Ù…ÙˆØ°Ø¬ Ø´Ø±Ø§Ø¡ ØªØ¬Ø±ÙŠØ¨ÙŠ â€” ØºÙŠØ± ÙØ¹Ù‘Ø§Ù„');})()">Ø´Ø±Ø§Ø¡</button>
          <button class="btn secondary" onclick="(function(){navigator.clipboard&&navigator.clipboard.writeText(location.href);alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·')})()">Ù…Ø´Ø§Ø±ÙƒØ©</button>
        </div>
      `;
      detailContent.animate([{transform:'translateY(8px)',opacity:0},{transform:'translateY(0)',opacity:1}],{duration:420,easing:'cubic-bezier(.2,.8,.2,1)'});
    }

    // Modal handlers
    openModalBtn.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', e=>{ if(e.target === modal) closeModal(); });
    function openModal(){ modal.style.display='flex'; document.body.style.overflow='hidden'; }
    function closeModal(){ modal.style.display='none'; document.body.style.overflow=''; }

    // Theme toggle
    toggleTheme.addEventListener('click', ()=>{
      document.documentElement.classList.toggle('theme-dark');
    });

    // IntersectionObserver for on-scroll animations (used >=3 places)
    // 1) features, 2) cards (many), 3) footer
    const observer = new IntersectionObserver((entries)=>{
      entries.forEach(ent=>{
        if(ent.isIntersecting) ent.target.classList.add('visible');
      });
    },{threshold:0.15});

    function observeReveals(){
      document.querySelectorAll('.reveal').forEach(el=>{
        observer.observe(el);
      });
    }

    // Header shrink observe (small decoration)
    const headerObserver = new IntersectionObserver((ents)=>{
      ents.forEach(e=>{ if(!e.isIntersecting) document.querySelector('header').classList.add('scrolled'); else document.querySelector('header').classList.remove('scrolled')});
    }, {root:null, threshold:0});
    headerObserver.observe(document.querySelector('main'));

    // Initialize with default query
    (function init(){
      const demo = 'javascript';
      qInput.value = demo;
      searchBooks(demo);
    })();

    // Accessibility: ensure images have alt (done above)
    // End of script
  </script>
</body>
</html>
